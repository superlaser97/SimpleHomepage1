<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homepage</title>
    <link href="./style.css" rel="stylesheet">
    <script>
        // ---------------------
        // --- CONFIGURATION ---
        // ---------------------
        const configJson = `{
            "pageTitle": "My Quick Links",
            "notes": [
                { "title": "Project Ideas", "content": "#Project Dashboard#\\nA personal dashboard with weather, to-do list, and quick links. Maybe use a public API.\\n\\n##Technology Choices##\\nIt could be built with SvelteKit or Next.js and deployed on Vercel for free.\\n\\n- Clean, modern design\\n- Utilize glassmorphism\\n- Add a configurable search bar\\n\\n##Design Principles##\\nThe design should be clean, modern, and utilize glassmorphism for a futuristic feel. I should also consider adding a configurable search bar that can search across different engines." },
                { "title": "Shopping List", "content": "#Groceries#\\n- Milk\\n- Bread\\n- Coffee Beans\\n\\n#Hardware#\\n- A new mousepad." },
                { "content": "Remember to deploy the latest changes to Vercel by Friday EOD." }
            ],
            "shortcuts": [
                { "name": "Google", "category": "Search", "url": "https://www.google.com", "icon": "google" },
                { "name": "Bing", "category": "Search", "url": "https://www.bing.com", "icon": "bing" },
                { "name": "YouTube", "category": "Media", "url": "https://www.youtube.com", "icon": "youtube" },
                { "name": "Reddit", "category": "Social & News", "url": "https://www.reddit.com", "icon": "reddit" },
                { "name": "GitHub", "category": "Development", "url": "https://github.com", "icon": "github" },
                { "name": "Vercel", "category": "Development", "url": "https://vercel.com", "icon": "vercel" },
                { "name": "Figma", "category": "Design", "url": "https://www.figma.com", "icon": "figma" }
            ],
            "categoryConfig": {
                "Search": { "color": "sky" },
                "Media": { "color": "red" },
                "Social & News": { "color": "orange" },
                "Development": { "color": "violet" },
                "Design": { "color": "pink" }
            },
            "icons": {
                "google": "M11.99 2C6.47 2 2 6.47 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a6.36 6.36 0 00-3.98-3.98V6.07h2.95a8.03 8.03 0 013.98 1.93zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2H4.26zm.8 2h2.95a6.36 6.36 0 003.98 3.98v-2.02h-2.95a8.03 8.03 0 01-3.98-1.96zM12.01 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c.09-.66.15-1.32.15-2s-.06-1.34-.15-2h4.68c-.09.66-.15 1.32-.15 2s.06 1.34.15 2zm.25 5.98v-2.02h2.95a8.03 8.03 0 01-3.98 1.96zM17.07 16h2.95a8.03 8.03 0 00-1.93-3.98H16.07v2.02c.36.01.71.02 1 .02z",
                "bing": "M12.83 12.83L10 16.5V7.5l2.83 3.67 4.51-4.51-2.05-2.05a8 8 0 10-8.12 8.12l2.05 2.05 4.51-4.51z",
                "youtube": "M21.58 7.19c-.23-.86-.91-1.54-1.77-1.77C18.25 5 12 5 12 5s-6.25 0-7.81.42c-.86.23-1.54.91-1.77 1.77C2 8.75 2 12 2 12s0 3.25.42 4.81c.23.86.91 1.54 1.77 1.77C5.75 19 12 19 12 19s6.25 0 7.81-.42c.86-.23-1.54-.91-1.77-1.77C22 15.25 22 12 22 12s0-3.25-.42-4.81zM10 15V9l5.2 3-5.2 3z",
                "reddit": "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1.84 13.21c-1.36 0-2.46-1.1-2.46-2.46s1.1-2.46 2.46-2.46 2.46 1.1 2.46 2.46-1.1 2.46-2.46 2.46zm3.68 0c-1.36 0-2.46-1.1-2.46-2.46s1.1-2.46 2.46-2.46 2.46 1.1 2.46 2.46-1.1 2.46-2.46 2.46zm-5.4-5.06c.26-.26.68-.26.94 0l1.62 1.62c.26.26.26.68 0 .94-.26.26-.68.26-.94 0l-1.62-1.62c-.26-.26-.26-.68 0-.94zm6.16 2.56c-.52 1-1.59 1.68-2.8 1.68s-2.28-.68-2.8-1.68c-.14-.28.04-.63.36-.71.32-.08.66.04.79.36.33.63 1.04 1.03 1.65 1.03s1.32-.4 1.65-1.03c.13-.32.47-.44.79-.36.32.08.5.43.36.71z",
                "github": "M12 2C6.477 2 2 6.477 2 12c0 4.419 2.865 8.166 6.839 9.49.5.092.682-.217.682-.482 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.343-3.369-1.343-.455-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.004.071 1.532 1.03 1.532 1.03.891 1.53 2.339 1.088 2.91.832.091-.647.349-1.088.635-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.03-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.269 2.75 1.026A9.564 9.564 0 0112 6.82c.85.004 1.705.115 2.504.336 1.909-1.295 2.747-1.026 2.747-1.026.546 1.378.202 2.398.1 2.65.64.7 1.028 1.595 1.028 2.688 0 3.848-2.338 4.695-4.566 4.942.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.578.688.482A10.001 10.001 0 0022 12c0-5.523-4.477-10-10-10z",
                "vercel": "M12 2L2 12l10 10 10-10L12 2z",
                "figma": "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9 18v-6H7V9h2V7a2 2 0 012-2h2v3h-2v2h2v3h-2v3H9z",
                "search": "M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
            }
        }`;

        const config = JSON.parse(configJson);
        const { pageTitle, notes, shortcuts, categoryConfig, icons } = config;

        // --- NEW: RENDER DYNAMIC FAVICON ---
        function renderFavicon() {
            const link = document.createElement('link');
            link.rel = 'icon';
            const svgFavicon = `<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'><path d='${icons.vercel}'/></svg>`;
            link.href = `data:image/svg+xml,${encodeURIComponent(svgFavicon)}`;
            document.head.appendChild(link);
        }

        // --- RENDER FUNCTIONS ---
        function renderTitle() {
            document.getElementById('page-title').textContent = pageTitle;
            document.title = pageTitle;
        }

        // --- NEW: GREETING FUNCTION ---
        function renderGreeter() {
            const greeterContainer = document.getElementById('greeter');
            if (!greeterContainer) return;

            const now = new Date();
            const hour = now.getHours();
            let greeting = 'Welcome!';

            if (hour < 12) {
                greeting = 'Good morning.';
            } else if (hour < 18) {
                greeting = 'Good afternoon.';
            } else {
                greeting = 'Good evening.';
            }
            greeterContainer.textContent = greeting;
        }

        function renderClock() {
            const clockContainer = document.getElementById('clock');
            if (!clockContainer) return;
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            clockContainer.innerHTML = `${hours}:${minutes}:<span class="opacity-60">${seconds}</span>`;
        }
        
        function createShortcutElement(shortcut) {
            const a = document.createElement('a');
            a.href = shortcut.url;
            a.target = '_blank';
            a.rel = 'noopener noreferrer';
            a.className = 'group flex items-center gap-4 p-4 rounded-lg shadow-lg hover:shadow-cyan-500/10 hover:-translate-y-1 transition-all duration-300 text-gray-700 dark:text-gray-200 border border-gray-300/80 dark:border-gray-700/80 ' +
                          'bg-white/50 dark:bg-gray-800/50 hover:bg-gray-200/60 dark:hover:bg-gray-700/80 ' +
                          'style-compact:gap-2 style-compact:p-2 style-compact:text-sm style-compact:bg-white/60 style-compact:dark:bg-gray-800/60';

            if (shortcut.icon && icons[shortcut.icon]) {
                const iconContainer = document.createElement('div');
                iconContainer.className = 'flex-shrink-0 w-6 h-6 style-compact:w-5 style-compact:h-5';
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svg.setAttribute('viewBox', '0 0 24 24');
                svg.setAttribute('fill', 'currentColor');
                svg.className = 'text-gray-500 dark:text-gray-400 group-hover:text-black dark:group-hover:text-white transition-colors duration-300';
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', icons[shortcut.icon]);
                svg.appendChild(path);
                iconContainer.appendChild(svg);
                a.appendChild(iconContainer);
            }
            const textSpan = document.createElement('span');
            textSpan.textContent = shortcut.name;
            textSpan.className = 'font-semibold style-compact:font-normal';
            a.appendChild(textSpan);
            return a;
        }

        // --- MODIFIED: ADDED SEARCH QUERY & EMPTY STATE ---
        function renderShortcuts(query = '') {
            const mainContainer = document.getElementById('shortcuts-container');
            mainContainer.innerHTML = '';
            
            const lowerCaseQuery = query.toLowerCase();
            const filteredShortcuts = shortcuts.filter(shortcut => 
                shortcut.name.toLowerCase().includes(lowerCaseQuery) ||
                shortcut.category.toLowerCase().includes(lowerCaseQuery)
            );

            if (filteredShortcuts.length === 0) {
                const message = query ? `No results found for "${query}".` : 'No shortcuts configured.';
                mainContainer.innerHTML = `<p class="text-gray-500 dark:text-gray-400 p-4 text-center col-span-full">${message}</p>`;
                return;
            }

            const groupedByCategory = filteredShortcuts.reduce((groups, shortcut) => {
                const category = shortcut.category;
                if (!groups[category]) groups[category] = [];
                groups[category].push(shortcut);
                return groups;
            }, {});

            let delay = 0;
            for (const category in groupedByCategory) {
                const config = categoryConfig[category] || { color: 'gray' };
                const colorClass = config.color;
                const categoryWrapper = document.createElement('div');
                categoryWrapper.className = `p-5 rounded-xl border border-gray-300/80 dark:border-gray-700/80 bg-white/40 dark:bg-gray-800/40 backdrop-blur-sm shadow-2xl transition-all duration-300
                                             style-compact:p-3 style-compact:rounded-lg style-compact:shadow-lg style-compact:bg-white/50 style-compact:dark:bg-gray-800/50`;
                categoryWrapper.style.animationDelay = `${delay}s`;
                delay += 0.1;

                const categoryHeader = document.createElement('div');
                categoryHeader.className = `flex items-center gap-3 mb-4 border-b-2 border-${colorClass}-500/50 pb-2
                                            style-compact:gap-2 style-compact:mb-2 style-compact:pb-1 style-compact:border-b style-compact:border-${colorClass}-500/30`;
                const categoryColorDot = document.createElement('div');
                categoryColorDot.className = `w-3 h-3 rounded-full bg-${colorClass}-500 style-compact:w-2 style-compact:h-2`;
                const categoryTitle = document.createElement('h2');
                categoryTitle.textContent = category;
                categoryTitle.className = 'text-xl font-bold text-gray-800 dark:text-gray-200 style-compact:text-lg style-compact:font-semibold';
                
                categoryHeader.appendChild(categoryColorDot);
                categoryHeader.appendChild(categoryTitle);
                categoryWrapper.appendChild(categoryHeader);

                const linksGrid = document.createElement('div');
                linksGrid.className = 'grid grid-cols-1 sm:grid-cols-2 gap-3 style-compact:gap-2';
                groupedByCategory[category].forEach(shortcut => {
                    linksGrid.appendChild(createShortcutElement(shortcut));
                });
                categoryWrapper.appendChild(linksGrid);
                mainContainer.appendChild(categoryWrapper);
            }
        }

        // --- MODIFIED: ADDED LIST (UL/LI) PARSING ---
        function parseNoteContent(rawContent, isPreview = false) {
            const lines = rawContent.split('\n');
            let processedLines = [];
            let currentParagraph = [];
            let inList = false;

            const flushParagraph = () => {
                if (currentParagraph.length > 0) {
                    processedLines.push(`<p class="text-gray-600 dark:text-gray-300 mb-2 style-compact:mb-1 style-compact:text-sm">${currentParagraph.join(' ').trim()}</p>`);
                    currentParagraph = [];
                }
            };
            
            const closeList = () => {
                if (inList) {
                    processedLines.push('</ul>');
                    inList = false;
                }
            };

            lines.forEach(line => {
                const headerMatch = line.match(/^(#{1,6})(.*?)\1$/);
                const listItemMatch = line.match(/^[\-\*]\s(.*)/);

                if (headerMatch) {
                    flushParagraph();
                    closeList();
                    const hashes = headerMatch[1];
                    const content = headerMatch[2];
                    const headingLevel = Math.min(hashes.length + 1, 6);
                    let classes = 'font-bold';
                    if (isPreview) {
                         if (headingLevel === 2) classes += ' text-md text-gray-500 dark:text-gray-400 mt-2 mb-1 style-compact:text-sm';
                         else classes += ' text-sm text-gray-500 dark:text-gray-400 mt-2 mb-1 style-compact:text-xs';
                    } else {
                        classes += ` text-sky-600 dark:text-sky-300 ${['text-2xl','text-xl','text-lg','text-base'][headingLevel-2] || 'text-base'}`;
                    }
                    processedLines.push(`<h${headingLevel} class="${classes}">${content.trim()}</h${headingLevel}>`);
                } else if (listItemMatch) {
                    flushParagraph();
                    if (!inList) {
                        processedLines.push('<ul class="list-disc list-inside space-y-1 pl-2 mb-2 style-compact:text-sm">');
                        inList = true;
                    }
                    processedLines.push(`<li class="text-gray-600 dark:text-gray-300">${listItemMatch[1].trim()}</li>`);
                } else if (line.trim() === '') {
                    flushParagraph();
                    closeList();
                } else {
                    closeList();
                    currentParagraph.push(line);
                }
            });

            flushParagraph();
            closeList();
            return processedLines.join('');
        }
        
        // --- MODIFIED: Dynamic truncation by line count ---
        function renderNotes() {
            const notesContainer = document.getElementById('notes-container');
            const maxLines = 6; // Set a limit for the number of lines to show in the preview

            if (!notes || notes.length === 0) {
                notesContainer.innerHTML = `<p class="text-gray-500 dark:text-gray-400 p-4 text-center col-span-full">No notes available.</p>`;
                return;
            }
            notesContainer.innerHTML = '';

            let delay = 0;
            notes.forEach(note => {
                const noteCard = document.createElement('div');
                noteCard.className = 'p-5 rounded-xl border border-gray-300/80 dark:border-gray-700/80 bg-white/40 dark:bg-gray-800/40 backdrop-blur-sm shadow-2xl flex flex-col transition-all duration-300 ' +
                                      'style-compact:p-3 style-compact:rounded-lg style-compact:shadow-lg style-compact:bg-white/50 style-compact:dark:bg-gray-800/50';
                noteCard.style.animationDelay = `${delay}s`;
                delay += 0.1;

                if (note.title) {
                    const titleElement = document.createElement('h3');
                    titleElement.className = 'text-lg font-bold text-sky-600 dark:text-sky-300 mb-2 style-compact:text-base style-compact:mb-1';
                    titleElement.textContent = note.title;
                    noteCard.appendChild(titleElement);
                }

                const contentElement = document.createElement('div');
                contentElement.className = 'text-gray-600 dark:text-gray-300 whitespace-pre-wrap style-compact:text-sm';
                noteCard.appendChild(contentElement);

                // --- New Truncation Logic ---
                const lines = note.content.split('\n');
                const isTruncated = lines.length > maxLines;
                const previewContent = isTruncated ? lines.slice(0, maxLines).join('\n') + '\n...' : note.content;
                contentElement.innerHTML = parseNoteContent(previewContent, true);
                // --- End New Logic ---

                if (isTruncated) {
                    const readMore = document.createElement('span');
                    readMore.textContent = 'Read more';
                    readMore.className = 'text-sky-600 dark:text-sky-400 hover:text-sky-500 dark:hover:text-sky-300 font-semibold mt-auto pt-2 cursor-pointer style-compact:text-xs style-compact:pt-1';
                    noteCard.appendChild(readMore);
                    noteCard.classList.add('cursor-pointer', 'hover:border-sky-500/50', 'dark:hover:border-sky-500/50', 'hover:-translate-y-1');
                    noteCard.addEventListener('click', () => showNoteModal(note.title, parseNoteContent(note.content, false), note.content));
                }

                notesContainer.appendChild(noteCard);
            });
        }
        
        function showNoteModal(title, htmlContent) {
            const modal = document.getElementById('note-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            modalTitle.textContent = title || 'Note';
            modalTitle.style.display = title ? 'block' : 'none';
            modalBody.innerHTML = htmlContent;
            modal.classList.add('is-active');
            document.body.style.overflow = 'hidden';
        }

        function hideNoteModal() {
            const modal = document.getElementById('note-modal');
            modal.classList.remove('is-active');
            document.body.style.overflow = '';
        }

        function setupModal() {
            const modal = document.getElementById('note-modal');
            const closeBtn = document.getElementById('modal-close-btn');
            const copyBtn = document.getElementById('modal-copy-btn');
            let currentNoteContent = '';
            const copyBtnText = document.getElementById('copy-btn-text');
            const copyBtnIcon = document.getElementById('copy-btn-icon');
            const copyBtnSuccessIcon = document.getElementById('copy-btn-success-icon');

            if (!modal || !closeBtn || !copyBtn) return;

            window.showNoteModal = (title, htmlContent, rawContent) => {
                const modalTitle = document.getElementById('modal-title');
                const modalBody = document.getElementById('modal-body');
                modalTitle.textContent = title || 'Note';
                modalTitle.style.display = title ? 'block' : 'none';
                modalBody.innerHTML = htmlContent;
                currentNoteContent = rawContent;
                modal.classList.add('is-active');
                document.body.style.overflow = 'hidden';
            };

            closeBtn.addEventListener('click', hideNoteModal);
            copyBtn.addEventListener('click', () => {
                if (copyBtnText.textContent === 'Copied!') return;
                navigator.clipboard.writeText(currentNoteContent).then(() => {
                    copyBtnText.textContent = 'Copied!';
                    copyBtnIcon.classList.add('hidden');
                    copyBtnSuccessIcon.classList.remove('hidden');
                    setTimeout(() => {
                        copyBtnText.textContent = 'Copy';
                        copyBtnIcon.classList.remove('hidden');
                        copyBtnSuccessIcon.classList.add('hidden');
                    }, 2000);
                }).catch(err => {
                    console.error('Failed to copy text: ', err);
                });
            });
            modal.addEventListener('click', (event) => {
                if (event.target === modal) hideNoteModal();
            });
        }
        
        // --- NEW: SEARCH FUNCTIONALITY ---
        function setupSearch() {
            const searchInput = document.getElementById('search-input');
            const searchBox = document.getElementById('search-box');
            if (!searchInput) return;

            searchInput.addEventListener('keyup', (e) => {
                renderShortcuts(e.target.value);
            });
            
            searchInput.addEventListener('focus', () => searchBox.classList.add('border-sky-500'));
            searchInput.addEventListener('blur', () => searchBox.classList.remove('border-sky-500'));
        }

        function setupThemeSwitcher() {
            const themeBtn = document.getElementById('theme-switcher');
            const sunIcon = document.getElementById('sun-icon');
            const moonIcon = document.getElementById('moon-icon');
            const applyTheme = (isDark) => {
                document.documentElement.classList.toggle('dark', isDark);
                sunIcon.classList.toggle('hidden', !isDark);
                moonIcon.classList.toggle('hidden', isDark);
            };
            themeBtn.addEventListener('click', () => {
                const isDarkMode = document.documentElement.classList.toggle('dark');
                localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
                applyTheme(isDarkMode);
            });
            const savedTheme = localStorage.getItem('theme');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            applyTheme(savedTheme === 'dark' || (!savedTheme && systemPrefersDark));
        }

        function setupDisplayStyleSwitcher() {
            const styleBtn = document.getElementById('style-switcher');
            const styleText = document.getElementById('style-text');
            const container = document.querySelector('.container');
            const applyDisplayStyle = (isCompact) => {
                container.classList.toggle('style-compact', isCompact);
                styleText.textContent = isCompact ? 'Comfortable' : 'Compact';
                styleText.classList.toggle('text-green-500', isCompact);
                styleText.classList.toggle('text-indigo-400', !isCompact);
                renderShortcuts(document.getElementById('search-input').value);
                renderNotes();
            };
            styleBtn.addEventListener('click', () => {
                const isCompact = container.classList.toggle('style-compact');
                localStorage.setItem('displayStyle', isCompact ? 'compact' : 'comfortable');
                applyDisplayStyle(isCompact);
            });
            const savedDisplayStyle = localStorage.getItem('displayStyle');
            applyDisplayStyle(savedDisplayStyle === 'compact');
        }

        window.onload = function() {
            renderTitle();
            renderFavicon(); // New
            renderGreeter(); // New
            renderClock();
            setInterval(renderClock, 1000);
            setupThemeSwitcher();
            setupDisplayStyleSwitcher(); // This will call renderShortcuts and renderNotes
            setupSearch(); // New
            setupModal();
            window.addEventListener('keydown', (event) => {
                // Focus search bar with '/' key
                if (event.key === '/' && document.activeElement.tagName.toLowerCase() !== 'input') {
                    event.preventDefault();
                    document.getElementById('search-input').focus();
                }
                if (event.key === 'Escape' && document.getElementById('note-modal').classList.contains('is-active')) {
                    hideNoteModal();
                }
            });
        };
    </script>
</head>
<body class="bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-white transition-colors duration-300">
    
    <div class="fixed top-4 right-4 flex space-x-2 z-50">
        <button id="theme-switcher" class="p-2 rounded-full bg-gray-500/20 hover:bg-gray-500/40 backdrop-blur-sm transition-colors cursor-pointer" aria-label="Toggle theme">
            <svg id="sun-icon" class="w-6 h-6 text-yellow-500 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
            <svg id="moon-icon" class="w-6 h-6 text-gray-200 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
        </button>

        <button id="style-switcher" class="p-2 rounded-full bg-gray-500/20 hover:bg-gray-500/40 backdrop-blur-sm transition-colors cursor-pointer" aria-label="Toggle display style">
            <span id="style-text" class="text-sm font-semibold text-indigo-400">Compact</span>
        </button>
    </div>

    <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-white/10 via-white/0 to-indigo-100/20 dark:from-gray-900 dark:via-gray-900 dark:to-indigo-900/40 -z-10"></div>
    
    <div class="container mx-auto p-4 sm:p-6 lg:p-8 transition-all duration-300
                 style-compact:p-2 style-compact:sm:p-4 style-compact:lg:p-6">
        <div class="mb-8 style-compact:mb-4">
            <div class="flex items-baseline gap-4">
                <h1 id="page-title" class="text-4xl font-bold text-left fade-in style-compact:text-3xl"></h1>
                <div id="clock" class="text-xl font-mono text-gray-500 dark:text-gray-400 style-compact:text-lg"></div>
            </div>
            <p id="greeter" class="text-gray-500 dark:text-gray-400 fade-in"></p>
        </div>

        <div class="mb-6 style-compact:mb-4">
            <div id="search-box" class="relative flex items-center p-1 rounded-xl border border-gray-300/80 dark:border-gray-700/80 bg-white/40 dark:bg-gray-800/40 backdrop-blur-sm shadow-lg transition-colors">
                <div class="w-10 h-10 flex items-center justify-center flex-shrink-0">
                    <svg class="w-6 h-6 text-gray-400 dark:text-gray-500" fill="currentColor" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>
                </div>
                <input id="search-input" type="text" placeholder="Search shortcuts... (Press '/' to focus)" class="w-full bg-transparent p-2 text-gray-800 dark:text-gray-200 focus:outline-none">
            </div>
        </div>

        <div id="shortcuts-container" class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-3 mb-6 style-compact:gap-2 style-compact:mb-4"></div>

        <div id="notes-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 style-compact:gap-2"></div>
    </div>

    <div id="note-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 transition-opacity duration-300 opacity-0 invisible" style="backdrop-filter: blur(10px);">
        <div id="note-modal-content" class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] transform scale-95 opacity-0 transition-all duration-300 relative flex flex-col">
            <button id="modal-close-btn" class="absolute top-4 right-4 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white text-3xl leading-none z-10">×</button>
            
            <div class="flex-grow overflow-y-auto" style="scrollbar-width: thin; scrollbar-color: #6b7280 transparent;">
                <div class="p-8">
                    <h2 id="modal-title" class="text-2xl font-bold mb-4 text-gray-900 dark:text-white"></h2>
                    <div id="modal-body" class="text-gray-700 dark:text-gray-200 whitespace-pre-wrap"></div>
                </div>
            </div>

            <div class="flex-shrink-0 pt-4 pb-6 px-8 border-t border-gray-200 dark:border-gray-700 flex justify-end">
                <button id="modal-copy-btn" class="flex items-center gap-2 px-4 py-2 rounded-md bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors cursor-pointer" aria-label="Copy content">
                    <span id="copy-btn-text" class="text-sm font-medium text-gray-700 dark:text-gray-200">Copy</span>
                    <svg id="copy-btn-icon" class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                    <svg id="copy-btn-success-icon" class="w-5 h-5 text-green-500 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                </button>
            </div>
        </div>
    </div>
</body>
</html>